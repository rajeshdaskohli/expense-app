<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expense App</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:Poppins}
body{
  background:#f4f6fb;
  padding:15px;
  max-width:450px;
  margin:auto;
}

/* डैशबोर्ड कार्ड्स के लिए ग्रिड */
.dashboard-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-bottom: 20px;
}

.mini-card {
  background: #fff;
  padding: 15px;
  border-radius: 14px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  border-left: 5px solid #7b2ff7; /* डेकोरेटिव बॉर्डर */
}

.mini-card h4 { margin: 0; font-size: 12px; color: #666; text-transform: uppercase; }
.mini-card p { margin: 5px 0 0; font-size: 18px; font-weight: 600; color: #333; }

/* फॉर्म कार्ड */
.card{
  background:#fff;
  border-radius:16px;
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,.1);
  animation:fadeIn .6s ease;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}

h2{text-align:center;margin-top:0; color: #333;}

input,select{
  width:100%;
  padding:12px;
  margin-bottom:12px;
  border-radius:10px;
  border:1px solid #ddd;
  outline: none;
}

button{
  position:relative;
  overflow:hidden;
  width:100%;
  padding:14px;
  background:linear-gradient(135deg,#7b2ff7,#f107a3);
  color:#fff;
  border:none;
  border-radius:12px;
  font-size:16px;
  cursor:pointer;
  font-weight: 600;
}

button span{
  position:absolute;
  border-radius:50%;
  transform:scale(0);
  animation:ripple .6s linear;
  background:rgba(255,255,255,.6);
}

@keyframes ripple{
  to{transform:scale(4);opacity:0}
}

#msg{text-align:center;margin-top:15px; font-weight: 600; color: #2ecc71;}
</style>
</head>

<body>

<div class="dashboard-grid">
  <div class="mini-card" style="border-left-color: #ff9f43;">
    <h4>Today</h4>
    <p id="today-total">₹0</p>
  </div>
  <div class="mini-card" style="border-left-color: #ee5253;">
    <h4>Month</h4>
    <p id="month-total">₹0</p>
  </div>
  <div class="mini-card" style="border-left-color: #10ac84;">
    <h4>Bank</h4>
    <p id="bank-total">₹0</p>
  </div>
  <div class="mini-card" style="border-left-color: #2e86de;">
    <h4>Credit Card</h4>
    <p id="cc-total">₹0</p>
  </div>
</div>

<div class="card">
  <h2>Add Expense</h2>

  <select id="type">
    <option value="Cash">Cash</option>
    <option value="Bank">Bank</option>
    <option value="Credit Card">Credit Card</option>
  </select>

  <input type="number" id="amount" placeholder="Amount ₹" step="0.01">
  <input type="text" id="note" placeholder="Note (optional)">

  <button onclick="saveExpense(event)">Save Expense</button>

  <div id="msg"></div>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzp58VdwStGxbBMWOc4UlrKR6qQdVrviza-EE9OnhLgqNrIn-751M0XIhw-munTRnXcXA/exec";

// लंबी संख्या को फिक्स करने के लिए हेल्पर फंक्शन
function formatCurrency(num) {
  return "₹" + parseFloat(num).toLocaleString('en-IN', {
    maximumFractionDigits: 2,
    minimumFractionDigits: 2
  });
}

function saveExpense(e){
  if(!amount.value) { alert("Please enter amount"); return; }
  
  ripple(e);
  msg.innerText = "Saving...";

  const data={
    type:type.value,
    amount:amount.value,
    note:note.value
  };

  fetch(API_URL,{
    method:"POST",
    mode: 'no-cors', // Google Apps Script के लिए अक्सर इसकी जरूरत होती है
    body:JSON.stringify(data)
  })
  .then(() => {
    msg.innerText="Saved Successfully ✅";
    
    // UI अपडेट (डेमो के लिए)
    // असल में ये डेटा आपके डेटाबेस से फेच होना चाहिए
    amount.value="";
    note.value="";
    setTimeout(()=> { msg.innerText=""; }, 3000);
  })
  .catch(err => {
    msg.innerText="Error Saving ❌";
    console.error(err);
  });
}

function ripple(e){
  const btn=e.currentTarget;
  const circle=document.createElement("span");
  const size=Math.max(btn.clientWidth,btn.clientHeight);
  circle.style.width=circle.style.height=size+"px";
  circle.style.left=e.offsetX-size/2+"px";
  circle.style.top=e.offsetY-size/2+"px";
  btn.appendChild(circle);
  setTimeout(()=>circle.remove(),600);
}
</script>

</body>
</html>
